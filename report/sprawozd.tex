%@descr: wzór sprawozdania, raportu lub pracy - nadaje się do przeróbek
%@author: Maciej Komosiński

\documentclass{article} 
\usepackage{polski} %moze wymagac dokonfigurowania latexa, ale jest lepszy niż standardowy babel'owy [polish] 
\usepackage[utf8]{inputenc} 
\usepackage[OT4]{fontenc} 
%\usepackage{gensymb}
\usepackage{graphicx,color} %include pdf's (and png's for raster graphics... avoid raster graphics!) 
\usepackage{url} 
\usepackage[pdftex,hyperfootnotes=false,pdfborder={0 0 0},colorlinks=true, linkcolor=blue]{hyperref} %za wszystkimi pakietami; pdfborder nie wszedzie tak samo zaimplementowane bo specyfikacja nieprecyzyjna; pod miktex'em po prostu nie widac wtedy ramek


\input{_ustawienia.tex}

%\title{Sprawozdanie z laboratorium:\\Metaheurystyki i Obliczenia Inspirowane Biologicznie}
%\author{}
%\date{}


\begin{document}

\input{_tytulowa}

\section*{Udział autorów}
\begin{tightlist}
\item SF zaimplementował tworzenie sinogramu, a także jego zapis do formatu DICOM, przygotował środowisko graficzne aplikacji
\item PH zaimplementował odtwarzanie obrazu wejściowego na podstawie sinogramu wraz z filtrowaniem, przeprowadził eksperyment wyjaśniający wpływ niżej opisanych parametrów na jakoś odtwarzanego obrazu.
\end{tightlist}



\section{Wstęp}

Naszym zadaniem było stworzenie aplikacji desktopowej w wybranej technologii i zaimplementowanie w niej symulacji dwuwymiarowego tomografu komputerowego. Wszystkie wymagania zostały wypunktowane \href{https://www.cs.put.poznan.pl/ibladek/students/iwm/0_projekt_wspolny_Tomograf.pdf}{tutaj}. Do stworzenia naszej aplikacji użyliśmy:
\begin{tightlist}
\item języka Python 3,
\item środowiska PyQt5 do stworzenia interfejsu okienkowego,
\item bibliotek dostępnych w języku Python (matplotlib, numpy, pyDicom...)
\end{tightlist}

Jedynie do obsługi zapisu do formatu DICOM użyliśmy gotowej biblioteki ze względu na trudność manipulacji danymi w tym formacie. Wszystkie obliczenia, zarówno podczas generacji sinogramu, jak i przejściu do obrazu wynikowego, a także obrót emitera i detektorów w funkcji kąta zamodelowaliśmy samodzielnie.

\begin{figure}[!htbp]
\begin{center}
\includegraphics[width=0.8\textwidth]{tomograf.jpg}
\end{center}
\caption{Schemat działania tomografu}
\label{fig:1Tdelta}
\end{figure}

Na Rysunku 1 widzimy, jak działa nasz tomograf komputerowy - jeden emiter obraca się o $360 ^{\circ}$, wysyła promieniowanie rentgenowskie przez badany obiekt i każda wiązka trafia na odpowiedni detektor. W naszej symulacji, przy pomocy algorytmu Bresenhama tworzymy dyskretną linię, prowadzącą od emitera do detektora przez obraz i sumuje jasności pikseli na tej drodze. W ten sposób, na każdej ścieżce emiter-detektor, dla każdego możliwego kąta obrotu emitera, otrzymujemy \textbf{sinogram}, czyli pośredni etap wizualizacji badanego obiektu. Nie podlega on żadnej analizie diagnostycznej. Następnie w wyniku operacji odwrotnej (Odwrotna Dyskretna Transformata Radona) otrzymujemy obraz wynikowy. 

ODTR polega na tym, że z każdym kątem obrotu $\alpha$ i każdą parą emiter-detektor sprzężona jest suma jasności pikseli na ich drodze. Na każdym pikselu, znajdującym się na tej drodze, zostawiamy średnią jas odpowiednieność piksela, wynikającą z sumy z sinogramu. Po iteracyjnym odtworzeniu obrazu, bez nałożonego filtrowania widzimy niedokładny, rozmyty obraz, podobny do początkowego. NORMALIZACJA? 

RYSUNEK-PIERWOTNY, SINOGRAM, ODTWORZONY

\clearpage %pozwol umiescic zalegle rysunki od razu tutaj 


\section{Analiza statystyczna}
\label{sec_analiza_statystyczna}

\subsection{Wpływ kąta $\alpha$ na jakość przetwarzania}
\label{subsec_alpha_comparison}

Pierwszym z parametrów wpływających na jakość przetwarzania jest kąt o jaki obraca się emiter w jednej iteracji. 

\begin{figure}[!htbp]
\begin{center}
\includegraphics[width=0.8\textwidth]{alpha.pdf}
\end{center}
\caption{Wpływ kąta alfa na jakość przetwarzania}
\label{fig:detectors_amount}
\end{figure}

Jak widać na poniższym wykresie wraz ze wzrostem wartości kąta alfa wzrasta też wartość błędu średniokwadratowego. 


\subsection{Wpływ liczby detektorów na jakość przetwarzania}
\label{subsec_detectors_amount_comparison}

Kolejnym z czynników jest liczba detektorów. Na poniższym zestawieniu widać wyraźnie, że wraz z rosnącą liczbą detektorów jakość przetwarzania rośnie. Na osi y przedstawione są wartości błędu średniokwadratowego dla kolejnych wartości liczb detektorów, które znajdują się na osi x. 

\begin{figure}[!htbp]
\begin{center}
\includegraphics[width=0.8\textwidth]{detectors_amount.pdf}
\end{center}
\caption{Wpływ liczby detektorów na jakość przetwarzania}
\label{fig:detectors_amount}
\end{figure}

Wraz ze zwiększeniem liczby detektorów spada błąd średniokwadratowy. Wynika to z faktu, że im więcej detektorów w modelu tomografu tym gęściej wysyłane są wiązki z danego emitera, co skutkuje dokładniejszym obrazem. Spowodowane jest to tym, że im więcej wiązek jest wysyłanych tym mniej niezarejestrowanych przez nie pikseli. W takich sytuacjach, piksele, przez które nie przechodziła wiązka, na obrazie wyjściowym będą miały kolor czarny.

Należy zaznaczyć, że po przekroczeniu granicznej iczby detektorów, która zależna jest od pozostałych parametrów przetwarzania zmiana błędu średniokwadratowego stabilizuje się, zmienia się w bardzo niewielkim stopniu, pomimo początkowego bardzo wyraźnego spadku.
W naszym eksperymencie, pozostałe parametry czyli kąt alfa i rozpiętość kątowa została ustalona na wartości odpowiednio $5 ^{\circ}$ i $180 ^{\circ}$. Dla tak przyjetych parametrów omawiana wartość graniczna ustalila się na wartość 60. 

\subsection{Wpływ rozpiętości kątowej detektorów na jakość przetwarzania}
\label{subsec_cone_width_comparison}


\begin{figure}[!htbp]
\begin{center}
\includegraphics[width=0.8\textwidth]{cone_width.pdf}
\end{center}
\caption{Wpływ rozpiętości kątowej na jakość przetwarzania}
\label{fig:cone_width}
\end{figure}

\section{Filtr}

%%%%%%%%%%%%%%%% literatura %%%%%%%%%%%%%%%%

\bibliography{sprawozd}
\bibliographystyle{plain}


\end{document}

